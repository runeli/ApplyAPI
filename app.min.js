var express=require("express"),app=express(),config=require("./config.js"),bodyParser=require("body-parser"),Application=require("./Application.js"),ApplicationWriter=require("./ApplicationWriter.js"),ApplicationReader=require("./ApplicationReader.js"),WebUI=require("./WebUI.js"),hbs=require("express-handlebars");app.use(bodyParser.json()),app.set("views","./views"),app.engine("handlebars",hbs({defaultLayout:"main"})),app.set("view engine","handlebars"),app[config.method].call(app,config.base,function(e,i){var r=new Application(e.body,config.fields);if(r.isValid()){var a=new ApplicationWriter(r);i.end(a.write())}}),app.get("/api/",function(e,i){var r=new ApplicationReader,a=r.read(),p=new WebUI(a,config);console.log(p.toString()),i.render("home",{params:p.toString()})}),app.listen(3e3,function(){console.log("Working on port 3000")});